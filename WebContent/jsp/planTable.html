<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>动态表格</title>
<script language="javascript" type="text/javascript">
    function $(id) { 
        return document.getElementById(id);
    }
	
	//添加计划
    function addPlan() { 
        var z; 
        var i=$("ph").value; //获取id=ph对象
        for (var j=1;j<$("mytable").rows.length;j++)   
        {
            if(parseInt(i)>=parseInt($("mytable").rows[j].cells[0].getElementsByTagName("input")[0].value))   
            {
                z=j;
            }                 
        } 
        z=$("mytable").rows.length;
        window.alert(z+"hello");
        if($("ph".value)==null){
        	window.alert("id不能为空");
        	}
        var tableRow=$("mytable").insertRow(z);
        var Cell_0=tableRow.insertCell(0);
        Cell_0.innerHTML='<input value="'+$("ph").value+'"  readonly="true"/>';
        Cell_0.className="s1";
        var Cell_1=tableRow.insertCell(1);
        Cell_1.innerHTML='<input value="'+$("xm").value+'"  readonly="true"/>';
        Cell_1.className="s2";
        var Cell_2=tableRow.insertCell(2);
        Cell_2.innerHTML='<input value="'+$("ch").value+'"  readonly="true"/>';
        Cell_2.className="s3";
        var Cell_3=tableRow.insertCell(3);
        Cell_3.innerHTML="<a href='#' onclick='Del(this.parentNode,this.parentNode.parentNode.rowIndex)'>删除</a>";
        Cell_3.className="s4";
        var Cell_4=tableRow.insertCell(4);
        Cell_4.innerHTML="<a href='#' onclick='edit(this.parentNode.parentNode)' class='edit'>修改</a>";
        Cell_4.className="s5";
    }
 
 //删除行
    function Del(obj,val) { 
        var a=window.confirm("您确定要删除吗？"); 
        if(a)  {
            $("mytable").deleteRow(val);
        }  else  {
            window.alert("未删除！");
        }
    }
     
//修改行
    function edit(obj) {
        var inp = obj.getElementsByTagName("input");
        for (var i=0,len=inp.length;i<len;i++)
        {
            inp[i].readOnly=false;
        }
    }
    </script>
    
</head>

<body>
    <h1>巡检计划管理</h1>
    <table id="mytable" bordercolor="#6699FF" cellspacing="0px" border="1px">
            <td class="s_top">计划号</td>
            <td class="s_top">计划名</td>
            <td class="s_top">计划周期</td>
            <td class="s_top">计划开始日期</td>
            <td class="s_top">计划开始时间</td>
            <td class="s_top">计划最晚完成时间</td>
            <td class="s_top">计划负责巡检人号</td>
            <td class="s_top">计划负责管理员号</td>
            <td class="s_top">计划状态</td>
            <td class="s_top">计划备注</td>
            <td class="s_top">计划详情号</td>
            <td class="s_top" colspan="2">操作</td>
        </tr>
        <tr>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s2"><input value="日常巡检计划" readonly/></td>
            <td class="s3"><input value="每天" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s4"><a href="#" onclick='Del(this.parentNode,this.parentNode.parentNode.rowIndex)'>删除</a></td>
            <td class="s5"><a href="#" onclick='edit(this.parentNode.parentNode)'>修改</a></td>
        </tr>
        <tr>
            <td class="s1"><input value="2" readonly/></td>
            <td class="s2"><input value="保养计划" readonly/></td>
            <td class="s3"><input value="每月" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s4"><a href="#" onclick='Del(this.parentNode,this.parentNode.parentNode.rowIndex)'>删除</a></td>
            <td class="s5"><a href="#" onclick='edit(this.parentNode.parentNode)'>修改</a></td>
        </tr>
        <tr>
            <td class="s1"><input value="3" readonly/></td>
            <td class="s2"><input value="精密保养计划" readonly/></td>
            <td class="s3"><input value="每半年" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s1"><input value="1" readonly/></td>
            <td class="s4"><a href="#" onclick='Del(this.parentNode,this.parentNode.parentNode.rowIndex)'>删除</a></td>
            <td class="s5"><a href="#" onclick='edit(this.parentNode.parentNode)'>修改</a></td>
        </tr>
    </table>
 
    <span class="span1">计划号</span><input id="ph" type="text"/>
    <br>
    <span class="span1">计划名称</span><input id="xm" type="text"/>
    <br>
    <span class="span1">计划周期</span><input id="ch" type="text"/>
    <br>
    <input class="but" type="button" value="添加计划" onclick="addPlan()"/>
 
    </body>
</html>
